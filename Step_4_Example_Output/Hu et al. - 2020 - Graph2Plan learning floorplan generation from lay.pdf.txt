References:

Annexes/Appendices:

Body Text:
Graph2Plan: Learning Floorplan Generation from Layout Graphs
RUIZHENHU,ShenzhenUniversity
ZEYUHUANG,ShenzhenUniversity
YUHANTANG,ShenzhenUniversity
OLIVERVANKAICK,CarletonUniversity
HAOZHANG,SimonFraserUniversity
HUIHUANG∗,ShenzhenUniversity
Bedroom 2
Bathroom 1
Balcony 1+
... ... ...
Bathroom Living Room Kitchen Br Kitchen Br
Living Room
Bedroom Bal. Bathroom Living Room
Kitchen
Bedroom Bedroom Bedroom
Bedroom
Bath Kitchen
Balcony Bal. Balcony Living Room Bath
Bal.
Bedroom Bedroom
BK ait l.
.
BathL ri ovi on mg Room Br Bedroom
Living Room
Kit. Living Room BathBr Balcony
Bedroom Bedroom Bedroom
Bath Kitchen
Balcony Balcony Balcony
(a) Input building boundary. (b) Generated floorplans. (c) After adding room counts. (d) After adding room connectivity. (e) After layout graph editing.
Fig.1. OurdeepneuralnetworkGraph2Planisalearningframeworkforautomatedfloorplangenerationfromlayoutgraphs.Thetrainednetworkcan
generatefloorplansbasedonaninputbuildingboundaryonly(a-b),likeinpreviousworks.Inaddition,weallowuserstoaddavarietyofconstraintssuchas
roomcounts(c),roomconnectivity(d),andotherlayoutgraphedits.Multiplegeneratedfloorplanswhichfulfilltheinputconstraintsareshown.
Weintroducealearningframeworkforautomatedfloorplangeneration of80Kannotatedfloorplans.Thenetworkismainlybasedonconvolutional
whichcombinesgenerativemodelingusingdeepneuralnetworksanduser- processingoverboththelayoutgraph,viaagraphneuralnetwork(GNN),
in-the-loopdesignstoenablehumanuserstoprovidesparsedesigncon- andtheinputbuildingboundary,aswellastherasterfloorplanimages,via
straints.Suchconstraintsarerepresentedbyalayoutgraph.Thecorecom- conventionalimageconvolution.Wedemonstratethequalityandversatility
ponentofourlearningframeworkisadeepneuralnetwork,Graph2Plan, ofourfloorplangenerationframeworkintermsofitsabilitytocatertodif-
whichconvertsalayoutgraph,alongwithabuildingboundary,intoafloor- ferentuserinputs.Weconductbothqualitativeandquantitativeevaluations,
planthatfulfillsboththelayoutandboundaryconstraints.Givenaninput ablationstudies,andcomparisonswithstate-of-the-artapproaches.
buildingboundary,weallowausertospecifyroomcountsandotherlay-
CCSConcepts:•Computingmethodologies→Shapemodeling;Neural
outconstraints,whichareusedtoretrieveasetoffloorplans,withtheir
networks.
associatedlayoutgraphs,fromadatabase.Foreachretrievedlayoutgraph,
alongwiththeinputboundary,Graph2Planfirstgeneratesacorresponding AdditionalKeyWordsandPhrases:floorplangeneration,layoutgraph,deep
rasterfloorplanimage,andthenarefinedsetofboxesrepresentingthe
generativemodeling
rooms.Graph2PlanistrainedonRPLAN,alarge-scaledatasetconsisting
ACMReferenceFormat:
∗Correspondingauthor:HuiHuang(hhzhiyan@gmail.com)
RuizhenHu,ZeyuHuang,YuhanTang,OlivervanKaick,HaoZhang,andHui
Huang. 2020. Graph2Plan: Learning Floorplan Generation from Layout
Authors’addresses:RuizhenHu,CollegeofComputerScience&SoftwareEngineer-
ing,ShenzhenUniversity,ruizhen.hu@gmail.com;ZeyuHuang,ShenzhenUniversity; Graphs.ACMTrans.Graph.39,4,Article118(July2020),14pages.https:
YuhanTang,ShenzhenUniversity;OlivervanKaick,CarletonUniversity;HaoZhang, //doi.org/10.1145/3386569.3392391
SimonFraserUniversity;HuiHuang,CollegeofComputerScience&SoftwareEngi-
neering,ShenzhenUniversity.
1 INTRODUCTION
Permissiontomakedigitalorhardcopiesofallorpartofthisworkforpersonalor
classroomuseisgrantedwithoutfeeprovidedthatcopiesarenotmadeordistributed Oneofthehottestrecenttrendsinthefieldofdesigns,inparticular,
forprofitorcommercialadvantageandthatcopiesbearthisnoticeandthefullcitation architecturaldesigns,istheadoptionofAIandmachinelearning
onthefirstpage.CopyrightsforcomponentsofthisworkownedbyothersthanACM
techniques.Thevolumeandefficiencyaffordedbyautomatedand
mustbehonored.Abstractingwithcreditispermitted.Tocopyotherwise,orrepublish,
topostonserversortoredistributetolists,requirespriorspecificpermissionand/ora AI-enabledgenerativemodelsareexpectedtocomplementanden-
fee.Requestpermissionsfrompermissions@acm.org. richthearchitects’workflow,providingaprofoundandlong-lasting
©2020AssociationforComputingMachinery.
impactonthedesignprocess.Asoneofthemostfundamentalele-
0730-0301/2020/7-ART118$15.00
https://doi.org/10.1145/3386569.3392391 mentsofarchitecture,floorandbuildingplanshavedrawnrecent
ACMTrans.Graph.,Vol.39,No.4,Article118.Publicationdate:July2020.
118:2 • R.Hu,Z.Huang,Y.Tang,O.vanKaick,H.Zhang,andH.Huang
interestsfromthecomputergraphicsandvisioncommunity.Recent inthefinalstep,weapplyanoptimizationtoaligntheroomboxes
worksondata-drivenfloorplanmodelingincluderaster-to-vector andproducethefinaloutputasavectorizedfloorplan.
floorplantransformation[Liuetal.2017],floorplanreconstruction Wedemonstratewithavarietyofresults,aswellasqualitative
from 3D scans [Liu et al. 2018], and floorplan or layout genera- andquantitativeevaluations,thatourlearning-basedframeworkis
tion[Chaillou2019;Wangetal.2019;Wuetal.2019]. abletogeneratehigh-qualityvectorizedfloorplans.Theintended
Inthispaper,weintroducealearningframeworkforautomated usersofourgenerativetoolincludefloorplandesignersforgames,
floorplangenerationwhichcombinesgenerativemodelingusing virtualreality,andlarge-scaleplanningprojects,aswellasendusers,
deepneuralnetworksanduser-in-the-loopdesignstoenablehu- wheretheywishtoexploreearlydesignintents,feasibilityanalyses,
manuserstoprovideinitialsparsedesignconstraints.Weobserve andmock-ups.Theexploratorynatureofthesetaskswouldrequire
thatuserpreferencesforatargetfloorplanoftengobeyondjusta flexibilityandversatilityofthetool.Indeed,ourframeworkprovides
buildingboundary[Wuetal.2019];theymayincludemorespecific varying degrees of control over the generative process. On one
informationsuchasroomcountsorconnectivity,e.g.,themaster hand,sinceuserinputisoptional,wecanautomaticallygeneratea
bedroomshouldbenexttothesecond(kid’s)bedroom.Suchcon- largevarietyoffloorplansbyretrievingtemplatelayoutgraphsonly
straintsarebestrepresentedbyalayoutgraph,muchlikescene accordingtoaroomboundaryandthenexecutingGraph2Plan.
graphsforimagecomposition[Johnsonetal.2018].Hence,thecore Thus,ourframeworkcanbeusedformassfloorplangeneration,
componentofourlearningframeworkisadeepneuralnetwork, suitableforthecreationofvirtualworlds.Ontheotherhand,we
Graph2Plan,whichconvertsalayoutgraph,alongwithabuilding alsoshowthatourtoolenablesuserstoguidethegenerationwith
boundary,intoafloorplanthatfulfillsboththelayoutandbound- designconstraints,wherethefloorplansadequatelyadapttothe
aryconstraints.Notethatsincethelayoutconstraintsaretypically inputboundaryandtheconstraints,leadingtodetailedfloorplan
sparse,evenoptional,theydonotcompletelyspecifyallroomsin mock-ups.Weconductauserstudytoshowtheplausibilityofthe
thefinalfloorplan.Consequently,theconstraintsmayleadtooneor generatedfloorplans. Inaddition,weperformanablationstudyand
moresuitablelayoutgraphs,andinturn,multiplefloorplansmay comparisontoastate-of-the-artapproachtofurtherevaluateour
begeneratedbyourmethodfortheusertoselectandexplore. frameworkandthegeneratedfloorplans.
Givenaninputbuilding/floorboundary,wefirstallowauserto
2 RELATEDWORK
optionallyspecifyroomcountsandlayoutconstraints,whichare
convertedintoaquerylayoutgraphtoretrieveasetoffloorplans Ingeneral,ourworkbelongstothetopicofgenerativemodelingof
fromadataset.Ifnosuchconstraintsareprovided,thenthebuilding structuredarrangements.Computergraphicsresearchhasintroduced
boundaryservesasthequery.Inourwork,weutilizethelarge-scale methodsforthegenerationofavarietyofstructuredarrangements
floorplandatasetRPLAN[Wuetal.2019]consistingofmorethan andlayouts,suchasdocumentlayoutsandclipart[Lietal.2019b],
80,000human-designedsamples.Theusercanfurtherrefinethe urbanlayoutsincludingstreetnetworks[Yangetal.2013],andgame
searchbyadjustingthequerylayoutgraph.Theadvantagesofthis levels[Hendrikxetal.2013].Asfollows,wediscussthestructured
retrieve-and-adjustprocessarethree-fold:asinputstoourfloorplan arrangementsmorecloselyrelatedtoourwork,suchasindoorscene
generationnetwork,thelayoutgraphsassociatedwiththeretrieved synthesis,floorplangeneration,andimagecomposition.
floorplanscarryboththeuserintentanddesignprinciplestrans-
Indoorscenesynthesis. Thesynthesisofindoorscenestypically
ferredfromtheRPLANtrainingset.Atthesametime,thesegraphs
involvestheplacementoffurnituremodelsfromanexistingdata-
offeraconcreteandintuiveinterfacetofacilitateuseradjustment
baseintoagivenroom.Asoneofthefirstsolutionstothisprob-
andrefinementofthelayoutconstraints.
lem,themethodofXuetal.[2002]usespseudo-physicsandpre-
Ourdeepgenerativeneuralnetwork,Graph2Plan,isalsotrained
definedplacementconstraintstoarrangeobjectsinascene.Merrell
ontheRPLANdataset.Foreachretrievedlayoutgraph,alongwith
etal.[2011]introduceaninteractivesystemthatsuggestsfurniture
theinputboundary,ournetworkgeneratesacorrespondingraster
arrangementsbasedonuserconstraintsandinteriordesignguide-
floorplanimagealongwithoneboundingboxforeachgenerated
lines.Morerecentmethodsmakeuseofdata-drivenapproachesthat
room;seeFigure2foranoverviewofourframework.Notethat
learnfromexistingarrangements.Forexample,Fisheretal.[2012]
whileoneboxperroommaynotallowustocaptureallpossible
useaBayesiannetworktosynthesizenewscenesfromagivenex-
roomshapes,itissufficienttocoverthemajorityasevidencedby
ample,whilesubsequentworkgeneratesscenesfromactionmaps
thefactthatover93%oftheroomsinRPLANcanberepresented
predictedonaninputscan,wherethepredictorislearnedfromtrain-
astheintersectionbetweentheirrespectiveboundingboxesand
ingdata[Fisheretal.2015].Zhaoetal.[2016]synthesizescenes
thebuildingboundary.Therasterfloorplanimageisnotthefinal
basedonhowobjectsinteractwitheachotherinanexamplescene.
output;itservesasaglobalpriorandanintermediaterepresentation
Incontrasttofloorplangeneration,scenesynthesisdoesnotin-
toguidetheindividualboxgenerationandrefinement.
volvepartitioningtheinputspaceintoroomsandcreationofroom
Figure6showsthenetworkarchitectureofGraph2Plan,which
boundaries,butmainlytheplacementofobjectsintoaroom.
ismainlybasedonconvolutionalprocessingoverboththelayout
graph,viaagraphneuralnetwork(GNN),andtheinputbuilding Floorplangeneration. Methodsforfloorplangenerationtypically
boundary,aswellastherasterfloorplanimages,viaconventional takeasinputtheoutlineofabuildingandasetofuserconstraints,
(image)convolutionalneuralnetworks(CNNs).SincetheCNNs suchasroomsizesandadjacenciesbetweenrooms,andpropose
donotaccountforrelationalinformationbetweentherooms,the aroomlayoutthatsatisfiestheconstraints,providingroomloca-
resultingboxesfromGraph2Planmaynotbewellaligned.Hence, tionsandboundaries(walls).Earliereffortstoaddressthisproblem
ACMTrans.Graph.,Vol.39,No.4,Article118.Publicationdate:July2020.
Graph2Plan:LearningFloorplanGenerationfromLayoutGraphs • 118:3
Bedroom 2+
Bathroom 1
... ...
User constraints
Boundary
(a) Input (b) Retrieved graph (c) Adjusted graph (d) Generated floorplan image and rooms (e) Vectorized floorplan
tsujdA
nalP2hparG
tnemngilA
Public area Bedroom
Bathroom Kitchen
Balcony Storage
Fig.2. Overviewofourframeworkforautomatedfloorplangeneration,whichcombinesgenerativemodelingusingdeepneuralnetworksanduser-in-the-loop
design.(a)Theuserinputsabuildingboundaryandcanalsospecifyconstraintsonroomnumbers,locations,andadjacencies.(b)Weretrievepossiblegraph
layoutsfromadatasetbasedontheuserinput.(c)Oncegraphshavebeenretrieved,weautomaticallytransferandadjustthegraphstotheinputboundary.
Theusercantheninteractivelyedittheroomlocationsandadjacenciesontheadjustedgraphs.(d)Thegraphsguideournetworkingeneratingcorresponding
floorplans,encodedasasetofroomboundingboxesandafloorplanrasterimage.(e)Wepost-processthisoutputtoobtainthefinal,vectorizedfloorplan.
usedproceduraloroptimizationmethodsandmanually-defined floorplangenerationcalledArchiGAN.Thestackenablesthegenera-
constraints.Forexample,ArvinandHouse[2002]generateindoor tionofabuildingfootprint,roomfloorplan,andfurnitureplacement,
layoutswithspring-systemswhoseequilibriumprovideslayouts allintheformofRGBimages.Theuserisabletomodifytheinput
closetothedesignobjectives.Merrelletal.[2010]generateresi- toeachstepbyeditingtheimages.However,nohigh-levelcontrol
dentialbuildinglayoutsfromhigh-levelconstraintswithstochastic ofthegeneration,suchasroomdimensionsandspecifications,is
optimizationandalearnedBayesiannetwork.Rosseretal.[2017] possible.Inourwork,weenablefinercontrolofthegenerationby
followuponthisworkbyalsoconsideringthespecificationofa allowingtheusertospecifythedesiredlayoutatahigh-level.Specif-
buildingoutlineandroomcharacteristics.Rodriguesetal.[2013a; ically,theuserinputsagraphthatprovidesthedesiredadjacencies
2013b]generatebuildinglayoutsfromconstraintswithanevolution- betweenroomsandhigh-levelpropertiesofrooms.Also,besides
arymethod.Recently,Wuetal.[2018]makeuseofmixedinteger theuserintent,thelayoutgraphcarriesdesignprinciplesavailable
quadraticprogrammingtogeneratebuildinginteriorlayouts. fromthetrainingset,sincethelayoutgraphsare(atleastpartially)
Afewapproacheshavealsobeenproposedtogenerateother retrievedfromthetrainingset.Hence,ournetworkincorporatesa
typesoflayoutsrelatedtofloorplans.ThemethodofBaoetal.[2013] richersetofconstraintsandusergoalswhengeneratingafloorplan.
allowsausertoexploreexteriorbuildinglayouts,whileFenget Recently,deepneuralnetworkshavebeendevelopedbyLiet
al.[2016]optimizethelayoutofmid-scalespaces,suchasmallsand al. [2019a] and Zhang et al. [2018] for indoor scene generation,
trainstations,accordingtoacrowdsimulation.Maetal.[2014]gen- wherethegenerativemodelscanmapanormaldistributiontoa
erategamelevelsfromaninputgraphwithadivide-and-conquer distribution of object arrangements. Specifically, in GRAINS, Li
strategy. In contrast to these approaches based on manual con- etal.[2019a]trainavariationalautoencoder,basedonrecursive
straintsorsimplelearningstrategiessuchasBayesiannetworks, neuralnetworks,tolearnrecursiveobjectgroupingrulesinindoor
ourapproachbasedondeeplearningisabletoimplicitlylearnthe environments.Anewscenehierarchycanbegeneratedbyapplying
constraintsforfloorplangenerationwiththeuseoftrainingdata, thetraineddecodertoarandomlydrawncode.
leadingtoamoreefficientmethodforgeneratingfloorplans. Morecloselyrelatedtoourwork,Wangetal.[2019]introduce
PlanIT,aneurally-guidedframeworkforindoorscenegeneration
Deeplearningforlayoutgeneration. Recentmethodsforlayout according to input scene graphs. Constrained by user-specified
generationmakeuseofdeeplearning.Wuetal.[2019]introducea roomspecifications(e.g.,wallsandfloors),aswellasspatialand
deepnetworkforthegenerationoffloorplansofresidentialbuild- functionalrelationsbetweenfurniture,theirworkfirstgenerates
ings.Givenabuildingoutlineasinput,thenetworkpredictsthe ascenegraphandtheninstantiatesthegraphintoarectangular
locationsofroomsandwalls,whicharethenconvertedintoavector roomviaiterativefurnitureobjectinsertion.Incontrast,ourwork
graphicsformat.Thenetworkistrainedonalarge-scaledensely focusesongeneratingfloorplans,whichconstitutepartitioninigs
annotateddatasetoffloorplansofrealresidentialbuildings.One ofrectilinearly-shapedbuildingboundariesintodifferenttypesof
limitationofthisapproachisthattheuserhaslittlecontrolonthe rooms.Technically,theirframeworkconsistsofagraphconvolu-
generatedlayout,besidesthespecificationoftheoutline.Moreover, tionalnetwork(GCN)forscenegraphgeneration,followedbyan
Chaillou[2019]proposesathree-stepstackofdeepnetworksfor
ACMTrans.Graph.,Vol.39,No.4,Article118.Publicationdate:July2020.
118:4 • R.Hu,Z.Huang,Y.Tang,O.vanKaick,H.Zhang,andH.Huang
image-basedandneurally-guidedsearchprocedureforsceneinstan- 2019].Thekeyadvantageofthisapproachisthatthelayoutgraphs
tiation.Inourwork,thelayoutgraphistheresultofaretrieval arederivedfromrealfloorplansincorporatinghumandesignprinci-
andourGraph2Plannetworkistrainedend-to-endtoproducea ples.Specifically,inpre-processing,wefirstextractallthelayout
floorplanimageandtheassociatedroomboxes. graphsfromthedataset.Next,toretrieverelevantlayoutgraphs,
NotethatbothGRAINSandPlanITassumethattheroombound- wefilterthegraphsbasedontheuserconstraintsandthenrank
ariesarerectangular.Inparticular,alignmentconstraintsareex- thegraphsbasedonhowwellthesourcefloorplanofthegraph
plicitlyembeddedintotheGRAINScodes,withthefourwallsofa matchestheboundaryinputbytheuser;seeFigure2(b).Notethat,
roomservingasspatialreferencesinallscenehierarchiestodefine iftheuserdidnotprovideanylayoutconstraints,thentheretrieval
thealignments.Incontrast,ournetworkGraph2Planworkswith isbasedonthebuildingboundaryalone.Afterthisstep,theuser
arbitrary(rectilinear)buildingboundaries,whicharemoregeneral canselectoneormoreofthepresentedlayoutgraphsasinputfor
thanroomswithfourwalls.Withanindeterminatenumberofwalls thenextstep.Oursystemalsoprovidesaninterfacethatallowsthe
andmanyshapevariationsoftheroomboundaries,itisdifficultto usertointeractivelymodifytheretrievedgraphstofurtherfulfill
encodealignmentconstraintsintothegenerativenetworkandrely his/herconstraints.Theoutputofthisstepisasetofcandidate
onsimpleheuristicstoenforcethem.Thismotivatesourchoiceof layoutgraphsthatguidethefloorplangeneration;seeFigure2(c).
usinganadditionalrefinementstepforroomalignment.
Floorplangeneration. Givenalayoutgraphassociatedwithare-
Imagecompositionfromscenegraphs. Incomputervision,anim-
trievedfloorplan,ourgoalistogenerateanewfloorplanwhich
portantproblemistosynthesizeimagesbycreatingascenecom-
instantiatesthelayoutgraphwithintheinputbuildingboundary.
posedofmultipleobjects.Arecentsolutiontothisproblemistode-
Whiletheretrievedfloorplandoesprovideaspatialrealizationof
rivethescenefromalayoutgraphdescribingthelocationandnames
thelayoutgraph,itsboundaryisdifferentfromtheinputboundary.
ofobjectsthatshouldappearintheimage.Johnsonetal.[2018]use
Retrofittingthelayoutgraphintothenewboundarycorrespondstoa
graphconvolutionandanadversarialnetworkforimagegeneration
“structuralretargetting”problem.Thisproblemishighlynon-trivial
fromagraph.AshualandWolf[2019]improvethequalityofthe
withoutaclearlydefinedobjectivefunction,andsimpleheuristics
generatedimagesbyseparatingtheinputlayoutfromtheappear-
todeterminetheroomlocations,sizes,andshapeswilllikelyyield
anceofthetargetobjects.Wedrawinspirationfromtheseworks
variousconflicts.Tothisend,wetrainadeepneuralnetwork,coined
byalsoguidingthefloorplangenerationwithagraph.However,
Graph2Plan,tosolvetheproblem,wherethenetworklearnshow
theproblemsettingisquitedifferent,giventhatimagegeneration
toperformtheretargetingbasedondesignprinciplesembeddedin
involvestheblendingofobjectsratherthanspacepartitioning.
thefloorplandatasetusedastrainingdata.
Graphgenerativemodels. Ourmethodalsorelatestoalineofwork Thenetworktakesasinputalayoutgraphandbuildingboundary,
onrepresentinggraphswithindeepnetworks.Recentapproaches andgeneratesaboundingboxforeachroom;seeFigure2(d).These
providegenerativemodelsofgraphs,basedonrecurrentarchitec- boundingboxesmaynotbeperfectlyalignedandtheremaybe
tures[Youetal.2018]orvariationalautoencoders[Groveretal. someoverlapbetweentheboxesofdifferentrooms.Thus,toensure
2019;SimonovskyandKomodakis2018].Inourwork,sinceourgoal thattheboundingboxesofallroomscanbecomposedintoavalid
isnottogenerategraphs,butusethegraphstodrivethegeneration floorplan,Graph2Planalsopredictsarasterfloorplanimagethat
offloorplans,weusetheearliergraphneuralnetwork(GNN)model assignsasingleroomlabeltoeachpixelinsidetheboundary.Finally,
ofScarsellietal.[2009]toencodegraphsinthefirstlayerofour wesolveanoptimizationproblemthatcombinestherasterfloorplan
network.TheGNNenablestomapavarietyofgraphtypesintoa imageandboundingboxestoprovidethefinal,validalignmentof
featurevector,whichcanthenbefurtherusedbyadeepnetwork. roomboundingboxesandavectorizedfloorplan;seeFigure2(e).As
discussedinSection2,werequirethisadditionalrefinementstep
3 OVERVIEW
sinceitisdifficulttoencodealignmentconstraintsandenforcethem
An overview of our floorplan generation framework is given in duringthefloorplangenerationwiththeinputbuildingboundaries
Figure 2, with each component outlined below. Figure 6 details takingonarbitraryshapes.
thearchitectureofthecorecomponent,theGraph2Plannetwork,
4 LAYOUTGRAPHRECOMMENDATION
whichistrainedontheRPLANdataset[Wuetal.2019].
In this section, we explain how the layout graphs are extracted
Initialuserinput. Theuserfirstentersabuildingboundaryfor
fromthelarge-scalefloorplandatasetRPLAN[Wuetal.2019],and
whichthefloorplanshouldbegenerated,andasetofconstraints
howrelevantgraphsareretrievedbasedonuserconstraints.The
thatguidethelayoutretrievalandfloorplangeneration(Figure2(a)).
retrievedlayoutgraphsarefirstadjustedautomaticallytoensure
Theuserisallowedtoprovideasinitialconstraintsthenumberof
thatallthenodesareinsidetheuser-providedbuildingboundary.
roomsofeachtypethatshouldappearinthefloorplan,thelocations
Then,theusercanfurtheredittheretrievedlayoutgraphs,especially
of specific rooms, and desired adjacencies between rooms. The
whensomeoftheuserconstraintsarenotfullysatisfied.
roomshavetypessuchasMasterRoom,SecondRoom,Kitchen,etc.For
example,aconstraintcouldrequire1MasterRoomand1BathRoom. 4.1 Layoutgraphextraction
Layoutgraphs. Toobtainthelayoutgraphsfromuser-specified TheRPLANdatasetprovidesfloorplansrepresentedasrasterim-
constraints,weadoptamoretraditionalretrieve-and-adjustpara- ageswithsemanticannotationsatthepixellevel[Wuetal.2019].
digmutilizingthelarge-scalefloorplandatasetRPLAN[Wuetal. Eachimagehasfourchannels,whichindicatethepixelsthatare
ACMTrans.Graph.,Vol.39,No.4,Article118.Publicationdate:July2020.
Graph2Plan:LearningFloorplanGenerationfromLayoutGraphs • 118:5
90°
360°
Inside 90°
-90° 90° 270°
90° -90°
180°
Surrounding
90°
(a) Node info (b) Edge info (c) Room relation types
90°
0° 90° 0 0.2 0.4 0.6 0.8 1
Fig.3. Informationencodedinthelayoutgraph:(a)Thenodesencodethe
roomtype,size,andlocationrelativetoa5×5grid.(b)Theedgesencode Fig.4. Turningfunctionofabuildingboundary:theencodingstartsfromthe
thespatialrelationtypebetweentworooms.Intheexample,thespatial bluepointbesidesthedoorhighlightedinyellow,andproceedsclockwise
relationsarerelativetothelargeyellowroomonthebottom-rightofthe aroundthepolygon,registeringtheanglesumateachcorner,whereeach
floorplan.(c)Alltheroomrelationtypesthatweconsiderinourframework. edgeisnormalizedbythesumofalledges.
inside/outside,ontheboundary,andtheroomlabelsandinstance
indexes.Toextractalayoutgraphforagivenfloorplan,werepresent theboundaryprovidedbytheuser.Iftheuserdidnotprovideany
eachroomasagraphnodeandaddanedgebetweenanytwonodes constraints,weskipthefilteringstep.
ifthecorrespondingroomsareadjacentinthefloorplan. Weopttorankgraphsbasedonmatchingboundariessincebuild-
Foreachroomnode,weencodethreepiecesofinformation:room ingswithsimilarboundarieswillbemorelikelytohavecompatible
type,roomlocation,androomsize,illustratedinFigure3(a).The floorplandesignsthatcanbetransferredtoeachother.However,
roomtypecanbeoneoftheNt =13followingtypes:LivingRoom, evenfortwobuildingswithexactlythesameboundary,different
MasterRoom,SecondRoom,GuestRoom,ChildRoom,StudyRoom,Din- frontdoorlocationscanleadtoasignificantchangeofthefloor-
ingRoom,Bathroom,Kitchen,Balcony,Storage,Wall-in,andEntrance. plan,implyingthatweneedtotakethefrontdoorlocationinto
Forencodingtheroomlocation,wefirstdividetheboundingbox considerationwhencomparingtwoboundaries.Toachievethis,we
ofthebuildingboundaryintoaK×K grid,andthenfindthegrid firstconvertthe2Dpolygonalshapeofeachboundaryintoa1D
cellwheretheroomcenterislocated.WesetK =5.Forencoding turningfunction[Arkinetal.1991],whichrecordstheaccumulation
theroomsize,wecomputetheratiobetweentheroomareaandthe ofanglesofeachturningpoint(corner)ofapolygon.Specifically,
wholebuildingarea. westartthesequenceononesideofthefrontdoorandrecordthe
Tofindtheadjacentroompairs,wefirstfindalltheinteriordoors anglesinaclockwiseorder;seeFigure4foranexample.Then,to
encodedinthefloorplanandthenconsideranyroomsonthetwo comparetwoboundaries,wemeasurethedistancebetweenturning
sidesofadoorasadjacentpairs.Next,tofindadditionaladjacent functions[Arkinetal.1991].Figure5showsoneretrievalexample.
pairs,wecheckwhetherthedistancebetweenanytworoomsis
4.3 Layoutgraphadjustment
smallerthanagiventhresholdrelativetotheroomboundingbox.
Foreachpairofadjacentrooms,weencodeonepieceofinformation: Weshoweachretrievedgraphinsidetheinputbuildingboundary,so
thepair’sspatialrelationtypeaccordingtohowtheroomsarecon- thattheusercanbetteranalyzethefitofthelayouttotheboundary.
nected,whichcanbeoneofleftof,rightof,above,below,left-above, Totransferagivenlayoutgraphtotheinputboundary,wefirst
right-above,left-below,right-below,inside,oroutside,illustratedin rotatethesourceplanofthegraphsothatitsboundaryalignsto
Figure3(b).Sincethesespatialrelationsaredirected,foreachpair theinputboundary,rotatingthegraphasaconsequence.Next,we
ofadjacentrooms,werandomlysampleonedirectionandassign transferthenodesfromtherotatedgraphtotheboundary.
thecorrespondingrelationtypetotheedge. Fortheboundaryalignment,sincetheboundarydistancemeasure
Afterextractingmorethan80Klayoutgraphsoutofthe120K isbasedontheturningfunctionstartingfromthefrontdoor,the
floorplansintheRPLANdataset[Wuetal.2019],wefindthatthe frontdoorservesasareferencepointforthealignment.Thus,we
extractedsubsetshowsenoughvarietyoffloorplandesignsandcan firstalignthefrontdoorsofthetwoboundaries,whichalsoprevents
beusedasaninformativetemplatesettohelpusersindesigning thefrontdoorfrombeingblockedbyanyroom.Toensurethatthe
theirownfloorplan. transformedfloorplanis stillavalidfloorplan with axis-aligned
boundaryedges,weconstrainthetransformationtobearotation
4.2 Layoutgraphretrieval
withk×90degrees,wherek ∈ N.Thevariablek isoptimizedso
Userscanspecifylayoutconstraintsbyprovidingthenumberof thattheanglebetweenthetwofrontdoordirectionsislessthan45
differentroomtypesthatshouldappearinthefloorplan,location degrees,wherethefrontdoordirectionisthevectorconnectingthe
ofrooms,andadjacenciesbetweenrooms.Forsimplicity,weclus- centerofthebuildingboundingboxtothecenterofthedoor.See
terdifferentkindsofbedroomsappearinginthedatasetintoone Figure5(a)-(c)foranexample.
category,andonlyallowtheuserstoaddlocationandadjacency Oncethefloorplanisalignedtothebuildingboundary,wetransfer
constraintsonfivetypesofrooms,asshowninthelegendofFig- thegraphnodes.Thepositionofeachroomnodeisencodedrelative
ure2(a).However,usershavetheoptiontospecifyroomnumbers totheboundingboxofthebuildingboundary.Thus,weposition
forfinercategories.Wefilteroutgraphsthatdonotsatisfyallof anodeinsidetheinputboundaryinthesamerelativepositionas
theuserconstraints,andthenshowthegraphstotheuserranked itappearsinthesourcefloorplan.However,sincetheboundary
byhowwelltheboundaryofthegraphs’sourcefloorplansmatches ofdifferentbuildingsmaydiffersignificantly,thisdirecttransfer
ACMTrans.Graph.,Vol.39,No.4,Article118.Publicationdate:July2020.
118:6 • R.Hu,Z.Huang,Y.Tang,O.vanKaick,H.Zhang,andH.Huang
aretakenfromalearneddictionarywithtenpossiblevalues,each
associatedwithonetypeofpairwiserelation.
Theoutputofthenetworkisa128×128floorplanimageIand
twosetsofroomboundingboxes:aninitialsetofboxes{B0},and
i
(a) (b) (c) (d) (e) arefinedset {B i1},withB i = [xi,yi,wi,hi]beingthepredicted
boundingboxforroomni.
Fig.5. Exampleofretrievalandadjustmentofalayoutgraph:(a)Input
boundary,(b)Retrievedgraph,(c)Transferredgraph,(d)Adjustedgraph, 5.2 Networkarchitecture
(e)Generatedfloorplan.
AdiagramofthefullarchitectureofourGraph2Plannetworkis
showninFigure6.ThelayoutgraphGisfirstpassedtoagraphneu-
ofnodepositionsmaycausesomeofthenodestofalloutsideof ralnetwork(GNN)[Scarsellietal.2009]thatembedseachroomin
thebuilding.Thus,thenodelocationsneedtobeadjustedduring thelayoutintoafeaturespace.Theboundaryfeaturesareobtained
theirtransfer.Sincewerepresentanodepositionrelativetoa5×5 throughaconventionalencoderappliedtoB,whoseoutputiscon-
grid,theadjustmentcanberestrictedtothegrid.Foreachroom catenatedwitheachoftheroomfeatures.Then,foreachroom,the
nodefallingoutsideofthebuilding,wemoveittotheclosestempty concatenatedfeaturesareusedtogenerateacorrespondingbound-
gridcell.Ifthereisalreadyanodeinsidethiscell,wemovethe ingboxthroughthenetworkdenotedasBox.Allthepredictedroom
alreadyexistingnodealongthesamedirectiontoanadjacentcell.If boxesarethenusedtoguidethecompositionofroomfeaturesfor
needed,thisprocessisiterateduntilthemovementofnodesreaches the generation of the floorplan image I through a cascaded re-
theothersideoftheboundary.Ifthemovementreachedthelast finementnetwork(CRN)[ChenandKoltun2017].Foroverlapping
cellalongthedirectionandthereisalreadyanodeinthecell,we regions,wesumupthecorrespondingroomfeatures.Tomakeuse
keep two nodes in the last cell. Note that this does not cause a oftheglobalinformationgatheredinthefloorplanimageI,inspired
problemsincewestillplacenodesintheirrelativepositions,and byworksonobjectdetection[Girshick2015],weconsiderthepre-
thustwonodeswillnotoccupythesamepositioninspace.See viouslypredictedboxesasregionsofinterest(RoIs)andrefineeach
Figure5(d)foranexampleofanadjustedgraph.Figure5(e)shows boxonebyonethroughanadditionalnetwork,whichwedenote
thecorrespondingfloorplangeneratedforthegraph. BoxRefineNet.
Wepresenttheinputboundaryandalignedgraphtotheuser ThenetworkarchitectureofBoxRefineNetisshowninFigure7.
inaninteractiveinterface,wheretheusercanedittheretrieved Morespecifically,BoxRefineNetfirstprocessesthewholeimagewith
graphandadaptitasneeded.Theusercanaddordeleteroomnodes severalconvolutionalandmaxpoolinglayerstoproduceafeature
and/oradjacencyedges,ormovenodesaroundtochangethelayout. map.Then,foreachroombox,aRoIpoolinglayerextractsafixed-
lengthfeaturevectorfromthefeaturemapandinitialboundingbox.
5 GRAPH-BASEDFLOORPLANGENERATION Thisfeaturevectoristhenconcatenatedwiththeroomfeatures
andfedintoanewBoxnetworkconsistingofasequenceoffully
Inthissection,weintroduceourGraph2Plannetworkforgraph-
connectedlayersthatoutputarefinedboxpositionandsize.
basedfloorplangeneration,andexplainhowtheresultsarerefined
toprovidethefinalvectorrepresentationofthegeneratedfloorplans.
5.3 Lossfunctions
5.1 Networkinputandoutput
TotraintheGraph2Plannetwork,wedesignsuitablelossfunctions
TheinputtotheGraph2Plannetworkistheinputbuildingbound- toaccountforeachtypeofoutput.Letusrecallthatthenetwork
aryB anduser-constrainedlayoutgraphG = {N,E}.Theinput predictsarasterfloorplanimageI,initialboxes{B0},andrefined
i
boundaryBisrepresentedasa128×128imagewiththreebinary boxes{B1}.Thelossfunctionisthendefinedas:
i
channelsencodingthreemasks,asintheworkofWuetal.[2019].
Thesemaskscapturethepixelsthatareinsidetheboundary,onthe L=Lpix(I)+Lreg({B i0})+Lgeo({B i0})+Lreg({B i1}), (1)
boundary,andontheentrancedoors.
Forthelayoutgraph,thenodesandedgesareencodedinasimilar
whereLpix(I)istheimagelossthatissimplydefinedasthecross
mannerasAshualandWolf[2019].Specifically,eachroomiinthe entropy of the generated floorplan image and the ground truth
floorplanisassociatedwithasinglenodeni = [ri,li,si],where floorplanimage,Lreg({B i})istheregressionloss,whichpenalizes
ri ∈ Rd1 isalearnedencodingoftheroomcategory,li ∈ {0,1}d2 theL1differencebetweenground-truthandpredictedboxes,and
isalocationvector,andsi ∈ {0,1}d3 isasizevector.Theroom Lgeo({B i0})isthegeometricloss,whichensuresthegeometriccon-
categoryembeddingriisoneofcpossibleembeddingvectors,c =13 sistencyamongboxesandbetweenboxesandtheinputboundary.
Notethatthegeometriclossisonlyappliedtotheinitialboxes;
beingthenumberofroomcategories,andri issetaccordingtothe
sincetherefinedboxesareonlyadjustedlocally,optimizingtheir
categoryofroomi.Thisembeddingislearnedaspartofthenetwork
geometricconsistencyleadstolittleimprovement.
t tr oa bin ein 25g, ta on dd enth oe teem acb oe ad rd si eng ims aiz ge ed l1 oci as ts ie ot na urb sii ntr gar ail 5y ×to 51 g2 r8 i. dd ,2 anis ds de 3t Thegeometriclossoftheinitialboxes{B i0}isdefinedas:
issettobe10todenotethesizeofaroomusingdifferentscales.The
edgeinformationeij ∈Rd1 alsoencodesalearnedembeddingfor
Lgeo({B i0})=Lcoverage({B i0})+Linterior({B i0})
(2)
therelationsbetweenthenodes.Inotherwords,thevaluesofeij +Lmutex({B i0})+L match({B i0}),
ACMTrans.Graph.,Vol.39,No.4,Article118.Publicationdate:July2020.
Graph2Plan:LearningFloorplanGenerationfromLayoutGraphs • 118:7
Box CNN … …
GNN
BoxRefineNet
Floorplan image
CNN
Ini�al boxes Refined boxes
…
Fig.6. ArchitectureofourGraph2Plannetwork.Thenetworktakesasinputalayoutgraphandbuildingboundary,andoutputsinitialroomboundingboxes
{B0},refinedroomboxes{B1},andarasterimageIofthefloorplan.Theprocessingiscarriedoutwithagraphneuralnetwork(GNN),convolutional
i i
neuralnetwork(CNN),fully-connectedlayers(Box),andaBoxRefineNet(detailedinFigure7).
CNN Feature
Map
ROI Pooling C Box2 (a) Coverage (b) Interior (c) Mutex (d) Match
Fig.8. Illustrationofthegeometricloss:(a)Coveragetermthatensures
thatthebuildingiscoveredbytheunionofallboxes,(b)Interiortermthat
constrainsboxestotheinterioroftheboundary,(c)Mutextermthatprevents
Fig.7. NetworkarchitectureoftheBoxRefineNet:thenetworkproducesa overlapamongroomboxes,and(d)Matchtermconstrainingboxestocover
featuremapoftheinputboundarywithaCNN.ARoIPoolinglayerthen thesameregionastheirground-truthcounterpart.Theinputboundaryis
extractsafeaturevectorfromthefeaturemapandinputboundingbox. showninblackcolor,predictedboxesareingrey,ground-truthboxeshave
Thefeaturevectorisconcatenatedwiththeroomfeatures,andfedinto ablueboundary,andtheredareasareusedtocalculatethelossterms.
fully-connectedlayers(Box2)thatoutputarefinedboxpositionandsize.
Coverageloss. TheinputbuildingBshouldbefullycoveredby
whereLcoverageandLinteriorbothconstrainthespatialconsistency theunionofalltheroomboxes.Specifically,anypointp ∈Ωin(B)
between the boundary B and the room bounding box set {B i}, shouldbecoveredbyatleastoneroombox.Thus,thecoverageloss
Lmutex constrainsthespatialconsistencybetweenanytworoom isdefinedasfollows:
b m tho a ex te wcs h oB t rh ki ea on g frd So uB u nnj, d ea - tn t ard u l.L t [hm 20ba 1t oc 9xh ]e( s a{ . nB T di h} ee) ne fi sn urs s ru t er t te h hs r eeth e pa rt ot e prth m ee rsp ca or re ved eii rnc at s ge p ed ir ob e fo dx thbe y es Lcoverage({B i})= (cid:205) p∈Ωin(B |) Ωm inin (Bid )|in(p,B i)2 , (3)
buildinginteriorbytheboxes.Weextendtheirformulationwith where|Ωin|isthenumberofpixelsinthesetΩin(B).
thelasttermthatcomparestheboxestotheground-truth,andthus
Interiorloss. Eachoftheroomboundingboxesshouldbelocated
ensuresthatthepredictionofboxlocationsanddimensionsisalso
improvedduringtraining.Figure8illustratesthegeometricloss.
insideoftheboundaryboundingboxBˆ.Thus,theinteriorlosscan
Beforegivingmoredetailsaboutthetermsofthegeometricloss, bedefinedasfollows:
w coe vefi rr as gt ed oe ffi an pe ot inw to pd bi yst aan boce xBfu ,n ac nt dio dn os u, td (pin ,( Bp, )B to) mto eam sue ra es hu ore wt fh ae r Linterior({B i})= (cid:205) i(cid:205) p (cid:205)∈ iΩ |in Ω(B ini () Bd iin )( |p,Bˆ)2 . (4)
apointpisfromaboxB:
Mutexloss. Theoverlapbetweenroomboxesshouldbeassmall
(cid:40)
din(p,B)= 0, ifp ∈Ωin(B); aspossiblesothattheroomsarecompactlydistributedinsidethe
min q∈Ωbd(B)||p−q||, otherwise. building.Thus,themutexlosscanbedefinedasfollows:
dout(p,B)=(cid:40) 0 m,
in q∈Ωbd(B)||p−q||,
oif tp he(cid:60) rwΩ ii sn e( .B); Lmutex({B i})= (cid:205) i(cid:205) p (cid:205)∈ iΩ (cid:205)in p(B ∈i Ω) i(cid:205) n(Bj(cid:44) i)i (cid:205)do ju (cid:44)t i(p 1,B j)2 . (5)
ThesetsΩin(B)andΩ bd(B)denotetheinteriorandboundaryofB, Matchloss. EachoftheroomboundingboxesB i shouldcover
respectively.Wedefinethetermsofthegeometriclossasfollows. thesameregionasthecorrespondingground-truthboxB∗,thatis,
i
ACMTrans.Graph.,Vol.39,No.4,Article118.Publicationdate:July2020.
118:8 • R.Hu,Z.Huang,Y.Tang,O.vanKaick,H.Zhang,andH.Huang
1 2 3
4
5
7
6
(a) Overlapped region (b) Order determination (c) Graph and final order
(a) Network prediction (b) Align with boundary (c) Align with neighbors
Fig.10. Exampleofdeterminingroomordering.(a)Giventheroomboxes
Fig.9. Exampleofroomalignment.(a)Giventheboxespredictedbythe
withoneoverlappedregionindicatedbytheredbox,(b)wecheckthecor-
network,(b)wealigntheboxestothebuildingboundary,andthen(c)align
adjacentboxestoeachother.
respondingregioninthegeneratedfloorplanimageItodeterminethe
relativedrawingorderoftheoverlappingroompair.Then,(c)acorrespond-
ingdirectededgeisaddedtotheroomgraphtoindicatethatoneroom
B
i
shouldbelocatedinsideofB i∗andB i∗shouldbelocatedinside n the ae td rs ot oo mbe 7d sr ha ow un ldb be efo dre rat whe no bt eh fe or r. eIn rot oh mis 1e .x Tam hep nle ,, wt ehe finon dly thc eo fn inst ar la din rt awis
ofB i.Thus,thematchlosscanbedefinedasfollows:
orderingoftheroomsrespectingtheconstraints.
L match({B i})= (cid:205) i(cid:205) p (cid:205)∈Ω iin |( ΩB ii n) (d Bin i)(p |,B i∗)2 +
(6)
(cid:205) i(cid:205) p (cid:205)∈Ω iin |Ω(B ini∗) (Bdi i∗n )(p |,B i)2 . wc oo n eu e bn w ut iis lt dh ho alu a grld rg aeb pre had r ber yaaw aw dn i dll ifi nbr gest od. nrIf a ewt nw n oo dfi er ro s to ot.m rF eos plg l ro ee w st et i nnh tge ets aha cim hse p rorv o oo c mt ee ,d, aut nh re de ,
5.4 Roomalignmentandfloorplanvectorization onedirectededgefromroomR2toroomR1,ifR1andR2overlap
ThefinaloutputofGraph2Planisarasterfloorplanimageand
andR1shouldbedrawnbeforeR2.Then,ourgoalistofindanorder
ofallthegraphnodessatisfyingtheorderingconstraintsimposed
oneboundingboxforeachroom.Anissuethatmayoccurwith
bythedirectededges.Tofindsuchanordering,wefirstrandomly
theoutputboxesisthattheymaynotbewellalignedandsome
selectanynodewithoutdegreeequalto0,andthenremovealledges
boxesmayoverlapincertainregions.Thus,inthefinalvectoriza-
pointingtothenodefromtherestofthegraph.Here,theoutdegree
tionstep,weusetherasterfloorplanimagetodeterminetheroom
isthenumberofdirectededgesstartingfromthenodewhichequals
labelassignmentintheregionswithoverlap,i.e.,wedeterminethe
thenumberofroomsthatneedtobedrawnbeforetheroomnode.
layerorderingofdifferentroomsandatthesametimeimprovethe
Wecontinueremovingnodeswithoutdegreeequalto0untilthe
alignmentofroomboundarieswithaheuristicmethod.
graphbecomesempty.Notethat,ifthereisaloopinthegraph,
Wefirstaligntheroomswiththebuildingboundaryandthen
wecannotfindalinearorderforthenodesintheloop.Thus,we
alignadjacentroomswitheachother.Morespecifically,foreach
randomlyselectthenodewithminimaloutdegreetodeleteand
edgeofaroombox,wefindthenearestboundaryedgewiththe
breaktheloop.Figure10showsanexampleofdeterminingroom
sameorientation,i.e.,horizontalorvertical,andaligntheboxedge
ordering.
withtheboundaryedgeiftheirdistanceissmallerthanagiven
Finally,weaddwindowsandinternaldoorstothefloorplanbased
thresholdτ.Furthermore,wealignadjacentroompairsbasedon
ontheheuristicsproposedbyWuetal.[2019],i.e.,adddoorsbe-
theirencodedspatialrelationinthelayoutgraph.Forexample,if
tweenconnectedroomsandwindowsalongexteriorwallsegments.
roomAisontheleftofroomB,wesnaptherightedgeofroom
AwiththeleftedgeofroomB.Inaddition,wealsosnapthetop 6 RESULTSANDEVALUATION
andbottomedgesofthetworoomsiftheyarealsocloseenough
accordingtothethresholdτ,sinceitisbetterforroomsthatare WediscussthecreationoftrainingdataforGraph2Plan,andthen
placedsidebysideinafloorplantohavealignedwallsinorderto evaluateourresultsqualitativelyandquantitatively.
minimizethenumberofcorners.Notethatoneroomboxmaybe
6.1 Trainingdatapreparation
adjacenttodifferentroomboxes.Thus,theedgeshavetobeupdated
severaltimes.Toavoidbreakingpreviouslyrefinedalignments,we ThetrainingdatafortheGraph2Plannetworkisderivedfrom
setaflagtoindicatewhetheraboxedgehasalreadybeenupdated RPLAN[Wuetal.2019].Theinputdataiscomposedofthebuilding
ornot.Ifanyoftheedgeshasalreadybeenupdated,itremainsfixed boundary and layout graph of each floorplan, while the output
andwealigntheotheredgetothefixededge.Ifbothedgesarenot dataiscomposedoftheroomboundingboxesandrasterimage.
fixed,weupdatethemtotheiraverageposition.Figure9showsan Theinputboundaryofeachfloorplancanbeeasilyextractedfrom
exampleofroomalignment. the annotated floorplan data and the layout graph extraction is
Moreover, we need to determine the room category label for explained in Section 4.1. The room bounding boxes can also be
regionscoveredbyoverlappingboxesanddeterminethedrawing easilyextractedfromtheannotatedfloorplans.However,theseboxes
orderofthoseroomboxes.Toachievethat,foreachpairofrooms, cannotbeuseddirectlysinceourmethodonlygeneratesrooms
wecheckiftheyoverlapandusethegeneratedfloorplanimageIto withoutwalls,whiletheboxesextractedfromRPLANhavegaps
determinetheirrelativeorder.Inmoredetail,foreachroompair,we betweenroomsafterthewallsareremoved.Tofillthegapsbetween
countthenumberofpixelsinsidetheregionwithoverlapthathas rooms,weuseouralignmentmethoddescribedinSection5.4.Note
thelabelofeachroom,anddeterminethattheroomwiththesmaller that,afteralignment,99%oftheareasoforiginalroomboxesare
ACMTrans.Graph.,Vol.39,No.4,Article118.Publicationdate:July2020.
Graph2Plan:LearningFloorplanGenerationfromLayoutGraphs • 118:9
contrast,ittakesabout4secondstogenerateafloorplanwiththe
methodofWuetal.[2019].Notethattheinitializationofoursystem
toopentheinterfaceandloadallthedatatakesaround10seconds.
6.4 Qualitativeresults
Ourmethodacceptsdifferenttypesandnumbersofuserconstraints
andgeneratesthecorrespondingfloorplans.Figure12showsaset
ofexampleresultsgeneratedfromdifferentboundaryinputsand
differentuserconstraints.Eachrowshowstheresultsofdifferent
layoutconstraintsappliedtothesameboundary,whileeachcolumn
showstheresultsobtainedwhenthesamelayoutconstraintsare
appliedtodifferentboundaries.Theselectedconstraintsarethe
Fig.11. Ourinterfaceforuser-in-the-loopdesignoffloorplans.Left:input desirednumbersofthreeroomtypes:bedroom,bathroom,andbal-
boundary.Middle:retrievedfloorplans.Right:floorplanandlayoutgraph cony.Thecorrespondingconstraintontheroomnumberisshown
ofaretrievedresult.Pleaserefertothetextformoredetails. onthebottomofeachcolumn.
Byexaminingeachrow,weseehowthegeneratedfloorplans
satisfythegivenroomnumberconstraintsandadapttotheinput
insidetherefinedroomboxes,andtheaverageIoUbetweenthe
boundary.Differentnumbersofbedrooms,bathrooms,andbalconies
originalroomboxesandrefinedroomboxesis0.86.Thus,therefined
aregeneratedbasedontheconstraints,andthelocationofthese
roomboxesusedasourground-trutharequiteconsistentwiththe
roomschangestobestconformthefloorplantotheinputboundary.
originaldata.Oncewerefinedtheroomboxlocations,weusethem
Notehowthebalconiesingreenusuallyhavetwoorthreefaces
toregeneratetherasterfloorplanimageIwithoutinteriorwalls.
onthebuildingboundary,reflectingthetypicalbalconydesignin
Thetraining-validation-testsplitofthedatais70%–15%–15%.
apartments.Thus,theirlocationchangesdependingontheinput
6.2 Networktraining boundary. All of the floorplans also have a living room, as it is
presentinbuildingswithcomplexboundarieslikethese,andcan
Ournetworkistrainedprogressivelysincethelaterstagesofthe haveadditionalrooms.
networkdependongoodinitialpredictionsofroomboxes.Thus, Fromtheresultsshownoneachcolumn,weseehowthesame
wetrainthenetworkinthreesteps.Inthefirststep,wetrainthe numberofroomswiththesametypedistributedifferentlyinside
portionofthenetworkthatpredictsinitialroomboxesfromthe thebuildingswithdifferentboundaries.Forexample,thetwobath-
input boundary and graph, using the loss termsLreg({B i0}) and roomsinthethirdcolumnaresometimesadjacenttoeachotherand
Lgeo({B i0})fromEq.1.Next,wealsotrainthegenerationofthe sometimesnot,butalwaysadjacenttobedrooms.Inthefifthcolumn,
rasterimage,addingthecorrespondingloss.Finally,wealsotrain balconiesareneveradjacenttoeachother,andusuallyappearat
theBoxRefineNet,usingallthetermsofEq.1. differentlocationsinthebuilding,showingarangeofvariationin
theresultingfloorplans.
6.3 Userinterface
Moreover, for each set of layout constraints, our method can
Figure11showsasnapshotofourinterfaceforfloorplandesign. retrievemorethanonefloorplanthatsatisfiesalltheconstraints,and
Onceaninputboundaryisloadedontheleftpanel,theusercan thenautomaticallytransferthegraphtotheinputboundarytoguide
specifyroomconstraintswiththedropdownboxesonthetopbaror thefloorplangeneration.Figure13showsmultipleresultsgenerated
bycreatingapartialgraphontheleftpanel.Then,thebestmatching forthesameboundaryandsameconstraints,i.e.,thefloorplans
floorplansareretrievedandshowninthemiddlepanel.Theusercan shouldhaveatleast2bedrooms,1bathroom,and1balcony.Note
inspectaretrievedresultbyclickingonitandseeingazoomed-in thediversityoftheresultsevenwhengeneratedfromthesame
versionofthefloorplanandlayoutgraphontherightpanel.Ifthe inputboundaryandsetoflayoutconstraints.
userlikesthesuggesteddesign,theycanclickthetransferbuttonto Furthermore,differentfrontdoorlocationscanleadtosignifi-
transferthegraphtotheinputboundaryandautomaticallyadjust cantlydifferentfloorplans,evenwithabuildingboundaryofthe
thenodelocationssothattheyfitintotheboundary.Theusercan sameshape.Figure14showsexampleresultsforthesameinput
furthereditthetransferredgraphbymovingnodesaround,deleting boundaryshapebutwithdifferentfrontdoorlocations.Inthisexam-
oraddingedges,andevendeletingoraddingnewnodes.Oncethe ple,wedidnotaddanyuserconstraintssothatthefloorplanwith
userissatisfiedwiththelayoutgraph,theycanclickabuttonto themostsimilarboundarydefinedbytheturningfunctionstarting
generateacorrespondingfloorplan.Afterthat,theprocesscanbe fromthedoorisretrievedandusedtodefinethegraph.Notehow
iteratedbyfurthereditingthegraphandregeneratingthefloorplan. theroomarrangementchangeswiththedifferentdoorlocations.
Given an input boundary, it takes 99ms to retrieve the list of Totesthowourmethoddealswithcomplexinputs,weshow
similarfloorplansfromthedatabase,11msforlayoutgraphtransfer, exampleresultswithcomplexinputboundariesinthelasttworows
68msforfloorplangenerationusingthepre-trainednetwork,and ofbothFigure12and13,wheretheboundarieshavemanycorners.
200ms for the post-processing step. Thus, in total, generating a Furthermore,wealsoshowexampleresultswithcomplexinput
floorplanfromaninputboundarytakeslessthan0.4seconds.In constraintsinthesecondrowofFigure14,whereweretrievelayout
ACMTrans.Graph.,Vol.39,No.4,Article118.Publicationdate:July2020.
118:10 • R.Hu,Z.Huang,Y.Tang,O.vanKaick,H.Zhang,andH.Huang
Public area Bedroom Bathroom Balcony Kitchen Storage
Fig.13. Eachrowshowsmultiplefloorplansgeneratedfromthesamebound-
aryandconstraints(atleast2bedrooms,1bathroom,and1balcony).
graphswiththemaximalnumberofnodes(8)inthedatasettocon-
strainthegeneration.Weseethatourmethodprovidesreasonable
resultsforbothcomplexinputboundariesandinputconstraints.
Graphadjustment. Figure15showsafewexampleresultsbefore
andaftertheusereditsthegraph.From(a)to(b),theuserbrokethe
linkbetweenthepinkandyellownodesonthetop-leftcornerand
(2,1,1) (2,1,2) (2,2,1) (3,1,1) (3,1,2)
thenmovedthepinknodetothebottom-leftcorner.Notehow,after
regeneratingthefloorplan,theleftpartoftheroomlayouthasbeen
Fig.12. Galleryoffloorplansgeneratedwithourmethod.Therowsshow
changedwhiletherightparthasbeenkeptthesame.From(b)to(c),
resultsgeneratedfordifferentinputboundaries,whilethecolumnsshow
theuseraddedanewgreennode(forBalcony)betweentworooms
resultsgeneratedfordifferentconstraints.Theconstraintsarethedesired
onthetop,andanewroomisgeneratedinthecorrespondingspace.
numberofthreeroomtypes:bedroom(inyellow),bathroom(blue),and
balcony(green).Theconstraintsareshownonthebottomofeachcolumn. From(c)to(d),theuseraddedanedgebetweenthenewgreennode
andthetop-leftyellownodetoenforcethetworoomstobealigned.
Notehowthecorrespondingchangesappearinthefloorplan.
ACMTrans.Graph.,Vol.39,No.4,Article118.Publicationdate:July2020.
Graph2Plan:LearningFloorplanGenerationfromLayoutGraphs • 118:11
Fig.14. Thefirstrowshowsfloorplansgeneratedforinputboundarieswith
thesameshapebutdifferentfrontdoorlocations(inyellow).Thesecondrow
showsfloorplansgeneratedforthesameboundarybutwithmorecomplex
layoutconstraintsbysettingtherequirednumberofroomsto8.
(a) (b) (c) (d)
Fig.15. Floorplanupdateaftertheuseradjustedthelayoutgraph.(a)Initial
graphandgeneratedfloorplan.(b)Nodemovedandedgeremoved.(c)New
nodeadded.(d)Newedgeadded.
ComparisontoWuetal.[2019]. Tocomparewiththefloorplan [Wu et al. 2019] Ours
generationmethodofWuetal.[2019],wegeneratefloorplansonly
fromtheinputboundarieswithouttakinganyuserconstraints.In Fig.16. ComparisontoWuetal.[2019]byapplyingtheirandourmethodon
thisway,thefloorplanwiththemostsimilarboundaryisretrieved thesameinputboundary.Notethatwecangeneratemultiplefloorplansfor
asingleinputboundary,withavarietyofroomnumbersandarrangements.
andthecorrespondinglayoutgraphistransferredforfloorplangen-
eration.Figure16showsthecomparison.Weseethatourfloorplans
arecomparableintheamountofdetailandqualitytothoseobtained
byWuetal.[2019].Inaddition,ourmethodcangenerateavariety
offloorplansfromasingleboundary,withdifferentnumbers,types,
andarrangementsofrooms.Ingeneral,thegeneratedfloorplans
capturedesignprinciplesthatareembeddedinthetrainingdata.
Withourmethod,theuserscanalsoedittheretrievedlayoutgraphs (a) Choose GT (right) (b) Choose ours (left) (c) Cannot tell
tofine-tunethefloorplansaccordingtotheirdesignintent.
Fig.17. Examplesoffloorplanspresentedinouruserstudy.Ineachexample,
6.5 Qualitativeevalution ourresultisshownontheleftandtheground-truth(GT)floorplanison
theright,whiletheuserselectionisindicatedinthecaption.
We evaluate the quality of a sample of floorplans generated by
Graph2Plan in a user study where we asked users to compare
generatedfloorplanswithground-truth(GT)floorplanstakenfrom onlydifferenceistheroomlayout.Wepresentedthefloorplansto
thetestset.Forthestudy,werandomlyselected20GTfloorplans theusersinrandomorder.Wealsogeneratedtwoadditionalfilter
andsettheroomtypesandnumbersoftheGTfloorplansasthe taskscomparingGTfloorplanstofloorplansgeneratedfromran-
constraintsforretrievalandfloorplangenerationwithourmethod. domlyplacedboxes,whichareobviouslylessplausiblethanGT
Inthestudy,weshowedthegeneratedfloorplanbesidesthecor- floorplans.Onlytheselectionsofuserswhopassedthefiltertasks
respondingGT,andaskeduserswhichfloorplanismoreplausible wereconsideredvalidresponses.
withoutrevealingeachsource.Userscouldselecteitherofthem Weasked30participantstodotheuserstudy,allofwhichare
asmoreplausibleor“Cannottell”.Notethattheboundary,room graduatestudentsincomputerscience,andcollected600answersin
typeandnumbersarethesameinthetwofloorplans,whilethe total.Thevotesfortheoptions“GT/ours/cannottell”are304/218/78,
ACMTrans.Graph.,Vol.39,No.4,Article118.Publicationdate:July2020.
118:12 • R.Hu,Z.Huang,Y.Tang,O.vanKaick,H.Zhang,andH.Huang
Input Setting 1 Setting 2 Setting 3 Setting 4 Setting 5 GT boxes GT floorplan
Fig.18. Ablationstudydemonstratingtheroleofeachcomponentofthenetworkingeneratinghigh-qualityfloorplans.Eachsettingevaluatestheisolated
effectofoneormoretermsofthelossfunction,whichcorrespondtospecificcomponentsofthenetwork.Pleaserefertothetextfordetailsoneachsetting.
respectively.Thus,for50.7%ofthequestions,participantsthink IntersectionoverUnion(IoU)measure.Onaverage,ourmethod
thattheground-truthfloorplansaremoreplausiblethanourresults, obtainsIoUscoresof0.65,whichindicategoodprediction,given
whilefor49.3%,participantsthinkthatourresultsareatleastas thattheoptimumvalueforIOUis1.
plausible,ifnotmoreplausible,thantheGT,whichindicatesthe Figure18showsexampleswherewevisuallycomparethepre-
highplausibilityofourresults.Figure17showsexamplesofuser dictedboxes(Setting5column)totheground-truth(GTcolumns).
selectionsfordifferentfloorplans.In(a),userstendtolikemorereg- Weseethat,overall,thepredictedroomboxesaresimilartothe
ularrooms;in(b),userspreferlargerrooms(kitchenandbedrooms); ground-truth,appearinginthesamelocationastheground-truth
in(c),theonlydifferencebetweenthetwolayoutsisthesizeofthe boxesandwithsimilarsize.However,smalldifferencesclosetothe
kitchen,whichiseitheralignedwithoneoftheboundarycorners roomboundariescanoccur,e.g.,someroomsareslightlyshorter
orwithanadjacentbathroom,whereuserscouldnotdecidewhich thanintheground-truth.
floorplanismoreplausible.Moreover,asshownin(b)and(c),the
roomlayoutgeneratedbyourmethodissimilartothegroundtruth, Ablationstudy. Tojustifyournetworkdesign,weperformfour
whichindicatesthatimplicitlythereexistdesignconstraintsinthe ablationstudieswithdifferentcombinationsofnetworkcomponents
datasetwhicharetransferredfromtheretrievedfloorplantothe andlossfunctions,andcomparethemtotheresultswiththefull
generatedfloorplan. networkandlossfunction,resultinginfiveevaluationsettings.The
settingsandcorrespondingIoUsare:
6.6 Quantitativeevalution
Graph2Planevaluation. ToevaluateourGraph2Plannetwork
• Setting1:boxregressiononly,usingLreg({B i0}).IoU=0.43.
quantitatively,wetakeeachbuildingboundaryandcorresponding
• Setting2:boxregression+geometryconstraint,usingLreg({B i0})
layoutgraphfromthetestset,andcomparetheroombounding +Lgeo({B i0}).IoU=0.47.
boxes generated by Graph2Plan to the ground-truth boxes ex- • Setting3:boxregression+imagecomposition,usingLreg({B i0})
tractedfromthesourcefloorplan.Wecomparetheboxeswiththe +Lpix(I).IoU=0.54.
ACMTrans.Graph.,Vol.39,No.4,Article118.Publicationdate:July2020.
Graph2Plan:LearningFloorplanGenerationfromLayoutGraphs • 118:13
• Setting4:boxregression+geometryconstraint+imagecom-
position,usingLreg({B i0})+Lgeo({B i0})+Lpix(I).IoU=0.56.
• Setting5:ourcompletenetworkwithboxregression+geom-
etryconstraint+imagecomposition+boxrefinement,using
Lreg({B i0})+Lgeo({B i0})+Lpix(I)+Lreg({B i1}).IoU=0.66.
(a) Input boundary (b) Retrieved floorplan (c) Retrieved graph (d) Adjusted graph (e) Final floorplan
NotethatSetting3canbeseenastheadaptationofthemethodof
AshualandWolf[2019]toourproblem.Inthecomparisonbetween Fig.19. Failurecase.Giventheinputboundary(a),iftheretrievedfloorplan
Setting1and3,weseethatusingthepredictedboxtocomposethe (b)hasquiteadifferentboundary,thenthecorrespondingretrievedgraph
rasterimageforglobalguidanceimprovesthegeneratedfloorplans. (c)needstobesufficientlyadjusted(d)tofitintotheinputboundaryto
ExamplescanbefoundinFigure18.Weseethatafewroomscan properlyguidethefloorplangeneration.(e)Asaresult,inthisexample,
gomissingwithouttheimageguidance(rows2and4). roomnodesaredistributedcloselytogetherandthefinalgeneratedrooms
haveoverlaps.Inaddition,someoftherelationshipconstraintsgivenbythe
WhencomparingSettings1and2,and3and4,weseethatadding
edgescannotbesatisfied.
the geometric loss on the initial boxes can slightly improve the
boxIoU.Notethatthefirstthreetermsofthegeometricloss,i.e.,
coverage,interior,andmutexterm,donottakeanyground-truth
informationintoconsideration,andjustaimtomaketheboxdistri- typesandtheirlocation,thetypesofconstraintsencodedinthe
butioninsidetheboundarylookbetter,i.e.,lessoverlapandmore graphsarelimited.Forexample,thegraphsdonotmodelaccessibil-
coverage.Thus,itisreasonablethatthesethreetermsalonedonot itycriteriaorfunctionalityconsiderationsofthefloorplans.Thus,
improve the IoU performance much. However, with these three theseconsiderationsarealsonotcapturedbythelearnednetwork.
terms,theboxdistributionlooksbetteringeneral,asshowninFig- Inaddition,theusercannotspecifythatcertainroomsshouldnot
ure18.E.g.,inSetting3,moreboxesareextendingtotheexterior beadjacenttoeachother,oradjacenttocertainfeaturesoftheinput
ofthebuildings,whichareadjustedinSetting4. boundary.Specifically,featuressuchasinteriordoorsandwindows
Finally,whencomparingourcompletenetwork(Setting5)to arenotcapturedbythecurrentmodel.Moreover,thealignmentof
all the other settings, we see that the performance is improved predictedroomsandvectorizationisdealtwithinapost-processing
significantlywiththeboxrefinementstep.WeseeinFigure18that step,andthusisnotpartofthecorelearningframework.Finally,if
theroomboxesaresignificantlytighteraftertherefinement. thelayoutgraphisretrievedfromasmalldatasetwheretheobtained
Tofurtherjustifythenecessityoftheboxrefinementcomponent boundaryissignificanlydifferentfromtheinputone,ourmethod
inthenetworkandshowtheeffectivenessofourpost-processing mayfailtogenerateafloorplanthatsatisfiesalltheconstraints;see
stepforroomalignmentandfloorplanvectorization,wealsocom- Figure19foranexample.
parethegenerationresultsobtainedbeforethepost-processingstep
Futurework. Asidefromaddressingthecurrentlimitations,direc-
tothoseobtainedafterthisstep.WefindthattheIoUbeforethe
tionsforfutureworkincludeextendingthescopeandcapabilities
post-processingstepisinitially0.54andthen0.66withrefinement,
ofouruser-guidedgenerationframework.Forexample,ourframe-
whiletheIoUafterthepost-processingstepisinitially0.75and
workcouldbeadaptedtoguidethesynthesisoffurniturebased
then0.80withrefinement.Fromtheseresults,weconcludethat:1)
onpreferencescapturedwithapartlayoutgraph.Inaddition,the
thevectorizationstepworkswell;2)therefinementcomponentin
frameworkcouldbeenhancedbyallowinguserstoperformmore
theGraph2Plannetworkisusefulandtheresultsbeforeandafter
complexmanipulationswiththelayoutgraphs,suchasretrieving
vectorizationarebothimproved.
othergraphssimilartoaquerygraphorcombininggraphs.More-
7 CONCLUSIONANDFUTUREWORK over,itispossibletoincorporateothertypesofuserconstraintsinto
oursystem.Forexample,thepositioningofsupportwallscouldbe
Weintroducethefirstdeeplearningframeworkforfloorplangener-
passedtothenetworkaspartoftheinputboundary.Inthatcase,
ationthatenablesuser-in-the-loopmodeling.Theuserscanspecify
itwouldbepossibletoaddanotherlossfunctionforsupportwalls
theirdesigngoalswithconstraintsthatguidetheretrievaloflayout
andcreatetheappropriatedatatotrainthenetwork.Finally,we
graphsfromalargedatasetoffloorplans,andcanfurtherrefine
couldalsolearnorderiveastructuralmodelofthefloorplansfrom
the constraints by editing the layout graphs. The layout graphs
thegenerateddesigns,toenableuserstofine-tunethestructureof
specifythedesirednumbersandtypesofroomsalongwiththe
thefinalroomlayouts,especiallythewalllocations.
roomadjacencies,anddirectlyguidethefloorplangeneration.We
demonstratedwithaseriesofexperimentsthatthisframeworkal- ACKNOWLEDGMENTS
lowsuserstogenerateavarietyoffloorplansfromthesameinput
Wethanktheanonymousreviewersfortheirvaluablecomments.
boundary,andfine-tunetheresultsbyeditingthelayoutgraphs.
ThisworkwassupportedinpartbyNSFC(61872250,61861130365,
Inaddition,aquantitativeevaluationshowsthatthefloorplansare
61761146002),GDHigherEducationKeyProgram(2018KZDXM058),
similartotrainingexamplesandthusalsotendtofollowthedesign
GD Science and Technology Program (2015A030312015), LHTD
principleslearnedfromthedatasetoffloorplans.
(20170003),NSERCCanada(611370,611649,2015-05407),giftfunds
Limitations. Asthisworkisafirststepinthedirectionofuser- fromAdobe,NationalEngineeringLaboratoryforBigDataSystem
guidefloorplangeneration,ithascertainlimitations.Althoughthe ComputingTechnology,andGuangdongLaboratoryofArtificial
layoutgraphsmodeltheuserpreferencesintermsofdesiredroom IntelligenceandDigitalEconomy(SZ),ShenzhenUniversity.
ACMTrans.Graph.,Vol.39,No.4,Article118.Publicationdate:July2020.
118:14 • R.Hu,Z.Huang,Y.Tang,O.vanKaick,H.Zhang,andH.Huang
REFERENCES
WenmingWu,LubinFan,LigangLiu,andPeterWonka.2018. MIQP-basedLayout
E.M.Arkin,L.P.Chew,D.P.Huttenlocher,K.Kedem,andJ.S.B.Mitchell.1991.An DesignforBuildingInteriors.ComputerGraphicsForum37,2(2018),511–521.
efficientlycomputablemetricforcomparingpolygonalshapes.IEEETrans.Pattern WenmingWu,Xiao-MingFu,RuiTang,YuhanWang,Yu-HaoQi,andLigangLiu.2019.
Analysis&MachineIntelligence13,3(March1991),209–216. https://doi.org/10. Data-drivenInteriorPlanGenerationforResidentialBuildings. ACMTrans.on
1109/34.75509 Graphics(Proc.SIGGRAPHAsia)38,6(2019),234:1–234:12.
ScottA.ArvinandDonaldH.House.2002.Modelingarchitecturaldesignobjectivesin KenXu,JamesStewart,andEugeneFiume.2002.Constraint-basedautomaticplacement
physicallybasedspaceplanning.AutomationinConstruction11,2(2002),213–225. forscenecomposition.InProc.GraphicsInterface,Vol.2.25–34.
OronAshualandLiorWolf.2019. SpecifyingObjectAttributesandRelationsin Yong-LiangYang,JunWang,EtienneVouga,andPeterWonka.2013.UrbanPattern:
InteractiveSceneGeneration.InProc.Int.Conf.onComputerVision. LayoutDesignbyHierarchicalDomainSplitting. ACMTrans.onGraphics(Proc.
FanBao,Dong-MingYan,NiloyJ.Mitra,andPeterWonka.2013. Generatingand SIGGRAPHAsia)32,6(2013),181:1–181:12.
ExploringGoodBuildingLayouts.ACMTrans.onGraphics(Proc.SIGGRAPH)32,4 JiaxuanYou,RexYing,XiangRen,WilliamL.Hamilton,andJureLeskovec.2018.
(2013),122:1–122:10. GraphRNN:GeneratingRealisticGraphswithDeepAuto-regressiveModel.InProc.
StanislasChaillou.2019.AI+Architecture:TowardsaNewApproach.Master’sthesis. Conf.onMachineLearning.
HarvardSchoolofDesign. ZaiweiZhang,ZhenpeiYang,ChongyangMa,LinjieLuo,AlexanderHuth,Etienne
QifengChenandVladlenKoltun.2017.Photographicimagesynthesiswithcascaded Vouga,andQixingHuang.2018.DeepGenerativeModelingforSceneSynthesis
refinementnetworks.InProc.Int.Conf.onComputerVision.1511–1520. viaHybridRepresentations.CoRRabs/1808.02084(2018).arXiv:1808.02084 http:
TianFeng,Lap-FaiYu,Sai-KitYeung,KangKangYin,andKunZhou.2016. Crowd- //arxiv.org/abs/1808.02084
drivenMid-scaleLayoutDesign.ACMTrans.onGraphics(Proc.SIGGRAPH)35,4 XiZhao,RuizhenHu,PaulGuerrero,NiloyMitra,andTakuKomura.2016.Relationship
(2016),132:1–132:14. TemplatesforCreatingSceneVariations.ACMTrans.onGraphics(Proc.SIGGRAPH
MatthewFisher,DanielRitchie,ManolisSavva,ThomasFunkhouser,andPatHanrahan. Asia)35,6(2016),207:1–13.
2012.Example-basedsynthesisof3Dobjectarrangements.ACMTrans.onGraphics
(Proc.SIGGRAPHAsia)31,6(2012),135:1–11.
MatthewFisher,ManolisSavva,YangyanLi,PatHanrahan,andMatthiasNießner.2015.
Activity-centricSceneSynthesisforFunctional3DSceneModeling.ACMTrans.on
Graphics(Proc.SIGGRAPHAsia)34,6(2015),179:1–13.
RossGirshick.2015.FastR-CNN.InProc.Int.Conf.onComputerVision.1440–1448.
AdityaGrover,AaronZweig,andStefanoErmon.2019.Graphite:IterativeGenerative
ModelingofGraphs.InProc.Conf.onMachineLearning.
MarkHendrikx,SebastiaanMeijer,JoeriVanDerVelden,andAlexandruIosup.2013.
ProceduralContentGenerationforGames:ASurvey. ACMTrans.Multimedia
Comput.Commun.Appl.9,1(2013),1:1–1:22.
JustinJohnson,AgrimGupta,andLiFei-Fei.2018.ImageGenerationfromSceneGraphs.
InProc.IEEEConf.onComputerVision&PatternRecognition.
JiananLi,JimeiYang,AaronHertzmann,JianmingZhang,andTingfaXu.2019b.Lay-
outGAN:GeneratingGraphicLayoutswithWireframeDiscriminators.InProc.Int.
Conf.onLearningRepresentations(ICLR).
ManyiLi,AkshayGadiPatil,KaiXu,SiddharthaChaudhuri,OwaisKhan,ArielShamir,
ChangheTu,BaoquanChen,DanielCohenOr,andHaoZhang.2019a.GRAINS:
GenerativeRecursiveAutoencodersforINdoorScenes.ACMTrans.onGraphics38
(2019).
ChenLiu,JiayeWu,andYasutakaFurukawa.2018.FloorNet:AUnifiedFrameworkfor
FloorplanReconstructionfrom3DScans.InProc.Euro.Conf.onComputerVision.
203–219.
C.Liu,J.Wu,P.Kohli,andY.Furukawa.2017.Raster-to-Vector:RevisitingFloorplan
Transformation.InProc.Int.Conf.onComputerVision.2214–2222.
ChongyangMa,NicholasVining,SylvainLefebvre,andAllaSheffer.2014.Gamelevel
layoutfromdesignspecification.ComputerGraphicsForum33,2(2014),95–104.
PaulMerrell,EricSchkufza,andVladlenKoltun.2010.Computer-generatedResidential
BuildingLayouts. ACMTrans.onGraphics(Proc.SIGGRAPHAsia)29,6(2010),
181:1–181:12.
PaulMerrell,EricSchkufza,ZeyangLi,ManeeshAgrawala,andVladlenKoltun.2011.
Interactivefurniturelayoutusinginteriordesignguidelines.ACMTrans.onGraphics
(Proc.SIGGRAPH)30,4(2011),87:1–10.
EugénioRodrigues,AdélioRodriguesGaspar,andÁlvaroGomes.2013a. Anevolu-
tionarystrategyenhancedwithalocalsearchtechniqueforthespaceallocation
probleminarchitecture,Part1:Methodology.Computer-AidedDesign45,5(2013),
887–897.
EugénioRodrigues,AdélioRodriguesGaspar,andÁlvaroGomes.2013b. Anevolu-
tionarystrategyenhancedwithalocalsearchtechniqueforthespaceallocation
probleminarchitecture,Part2:Validationandperformancetests.Computer-Aided
Design45,5(2013),898–910.
JulianF.Rosser,GavinSmith,andJeremyG.Morley.2017. Data-drivenestimation
ofbuildinginteriorplans. Int.J.ofGeographicalInformationScience31,8(2017),
1652–1674.
F.Scarselli,M.Gori,A.C.Tsoi,M.Hagenbuchner,andG.Monfardini.2009.TheGraph
NeuralNetworkModel.IEEETrans.onNeuralNetworks20,1(2009),61–80.
MartinSimonovskyandNikosKomodakis.2018. GraphVAE:TowardsGeneration
ofSmallGraphsUsingVariationalAutoencoders.InInt.Conf.onArtificialNeural
Networks.412–422.
Chun-YuSun,Qian-FangZou,XinTong,andYangLiu.2019. Learningadaptive
hierarchicalcuboidabstractionsof3Dshapecollections.ACMTrans.onGraphics
38,6(2019),241:1–241:13.
KaiWang,Yu-AnLin,BenWeissmann,ManolisSavva,AngelX.Chang,andDaniel
Ritchie.2019.PlanIT:PlanningandInstantiatingIndoorSceneswithRelationGraph
andSpatialPriorNetworks.ACMTrans.onGraphics(Proc.SIGGRAPH)38,4(2019),
132:1–132:15.
ACMTrans.Graph.,Vol.39,No.4,Article118.Publicationdate:July2020.

